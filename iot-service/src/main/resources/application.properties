spring.application.name=iot-service
# Port and datasource now configurable via environment variables (.env)
server.port=${IOT_SERVICE_PORT:8083}
spring.datasource.url=${IOT_DATABASE_URL:jdbc:postgresql://localhost:5432/heritage_db}
spring.datasource.username=${IOT_DATABASE_USERNAME:postgres}
spring.datasource.password=${IOT_DATABASE_PASSWORD:1234}
spring.jpa.hibernate.ddl-auto=${JPA_HIBERNATE_DDL_AUTO:update}
spring.sql.init.mode=${SPRING_SQL_INIT_MODE:always}

# RabbitMQ Configuration
spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USERNAME:guest}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:guest}

# Spring Cloud Stream Bindings
# INPUT: Consommation des donn√©es de capteurs depuis Node-RED
spring.cloud.stream.bindings.receiveMeasurement-in-0.destination=iot.measurements
spring.cloud.stream.bindings.receiveMeasurement-in-0.group=iot-service

# OUTPUT: Publication des alertes de risque
spring.cloud.stream.bindings.riskAlertSupplier-out-0.destination=iot.risk.alert

# Spring Cloud Function Definition
spring.cloud.function.definition=receiveMeasurement
